<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1l1bv1i" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.6.0">
  <bpmn:process id="bedarf_anfrage_prozess" isExecutable="true" camunda:historyTimeToLive="10">
    <bpmn:startEvent id="StartEvent_1" name="Anfrage erhalten" camunda:asyncBefore="true">
      <bpmn:outgoing>SequenceFlow_0a5ooqu</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0a5ooqu" sourceRef="StartEvent_1" targetRef="bedarf_anfrage_prozess_beantworten" />
    <bpmn:endEvent id="EndEvent_1m3wuzk" name="Match-Prozess gestartet">
      <bpmn:incoming>SequenceFlow_1uov2lb</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_11bsoks" sourceRef="bedarf_anfrage_prozess_match_prozess_starten" targetRef="ExclusiveGateway_1jl56n2" />
    <bpmn:subProcess id="SubProcess_0h1ny74" triggeredByEvent="true">
      <bpmn:endEvent id="EndEvent_0zwid5r">
        <bpmn:incoming>SequenceFlow_1qryaoy</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:startEvent id="StartEvent_0xfsbi5" name="Anfrage stornieren" camunda:asyncBefore="true">
        <bpmn:outgoing>SequenceFlow_0br5wnm</bpmn:outgoing>
        <bpmn:messageEventDefinition messageRef="Message_0vmpi40" />
      </bpmn:startEvent>
      <bpmn:serviceTask id="Task_1qi5jni" name="Stornierung verarbeiten" camunda:type="external" camunda:topic="bedarfAnfrageAblehnen">
        <bpmn:incoming>SequenceFlow_0br5wnm</bpmn:incoming>
        <bpmn:outgoing>SequenceFlow_1qryaoy</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:sequenceFlow id="SequenceFlow_0br5wnm" sourceRef="StartEvent_0xfsbi5" targetRef="Task_1qi5jni" />
      <bpmn:sequenceFlow id="SequenceFlow_1qryaoy" sourceRef="Task_1qi5jni" targetRef="EndEvent_0zwid5r" />
    </bpmn:subProcess>
    <bpmn:serviceTask id="bedarf_anfrage_prozess_match_prozess_starten" name="Match Prozess starten" camunda:type="external" camunda:topic="bedarfMatchProzessStarten">
      <bpmn:incoming>SequenceFlow_0g86ak6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_11bsoks</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0yz94k1" name="Anfrage angenommen?" default="SequenceFlow_03xphmp">
      <bpmn:incoming>SequenceFlow_06a4jz2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0g86ak6</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_03xphmp</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0g86ak6" name="Ja" sourceRef="ExclusiveGateway_0yz94k1" targetRef="bedarf_anfrage_prozess_match_prozess_starten">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${angenommen}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_03xphmp" name="Nein" sourceRef="ExclusiveGateway_0yz94k1" targetRef="bedarf_anfrage_prozess_stornierung_verarbeiten" />
    <bpmn:serviceTask id="bedarf_anfrage_prozess_stornierung_verarbeiten" name="Stornierung verarbeiten" camunda:type="external" camunda:topic="bedarfAnfrageAblehnen">
      <bpmn:incoming>SequenceFlow_03xphmp</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0ifltcr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="EndEvent_0txu0vj" name="Anfrage storniert">
      <bpmn:incoming>SequenceFlow_0ifltcr</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0ifltcr" sourceRef="bedarf_anfrage_prozess_stornierung_verarbeiten" targetRef="EndEvent_0txu0vj" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_1jl56n2" name="Bedarf bedient?">
      <bpmn:incoming>SequenceFlow_11bsoks</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0h8v8ey</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0g09oc8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0h8v8ey" name="nein" sourceRef="ExclusiveGateway_1jl56n2" targetRef="ExclusiveGateway_093syas">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${bedarfsmenge &gt; 0}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:subProcess id="SubProcess_1a2s5hn" triggeredByEvent="true">
      <bpmn:sequenceFlow id="SequenceFlow_05hvqdz" sourceRef="StartEvent_06mv9mn" targetRef="Task_1hjbs5v" />
      <bpmn:serviceTask id="Task_1hjbs5v" name="Stornierung verabreiten" camunda:type="external" camunda:topic="bedarfAnfrageAblehnen">
        <bpmn:incoming>SequenceFlow_05hvqdz</bpmn:incoming>
        <bpmn:outgoing>SequenceFlow_05ehmxv</bpmn:outgoing>
      </bpmn:serviceTask>
      <bpmn:endEvent id="EndEvent_04hst1p">
        <bpmn:incoming>SequenceFlow_05ehmxv</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:sequenceFlow id="SequenceFlow_05ehmxv" sourceRef="Task_1hjbs5v" targetRef="EndEvent_04hst1p" />
      <bpmn:startEvent id="StartEvent_06mv9mn" name="Bedarf gedeckt" camunda:asyncBefore="true">
        <bpmn:outgoing>SequenceFlow_05hvqdz</bpmn:outgoing>
        <bpmn:messageEventDefinition messageRef="Message_10bz0bl" />
      </bpmn:startEvent>
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="SequenceFlow_0g09oc8" name="ja" sourceRef="ExclusiveGateway_1jl56n2" targetRef="AnfrageProzesseSuchenUndBeendenTask">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${bedarfsmenge &lt;= 0}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="AnfrageProzesseSuchenUndBeendenTask" name="Anfrageprozesse suchen und beednen" camunda:type="external" camunda:topic="AnfrageProzesseSuchenundBeenden">
      <bpmn:incoming>SequenceFlow_0g09oc8</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_18bm7r2</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_093syas">
      <bpmn:incoming>SequenceFlow_0h8v8ey</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_18bm7r2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1uov2lb</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1uov2lb" sourceRef="ExclusiveGateway_093syas" targetRef="EndEvent_1m3wuzk" />
    <bpmn:sequenceFlow id="SequenceFlow_18bm7r2" sourceRef="AnfrageProzesseSuchenUndBeendenTask" targetRef="ExclusiveGateway_093syas" />
    <bpmn:sequenceFlow id="SequenceFlow_06a4jz2" sourceRef="bedarf_anfrage_prozess_beantworten" targetRef="ExclusiveGateway_0yz94k1" />
    <bpmn:userTask id="bedarf_anfrage_prozess_beantworten" name="Anfrage beantworten" camunda:candidateGroups="${institution}">
      <bpmn:incoming>SequenceFlow_0a5ooqu</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_06a4jz2</bpmn:outgoing>
    </bpmn:userTask>
  </bpmn:process>
  <bpmn:message id="Message_0vmpi40" name="bedarf_anfrage_stornieren" />
  <bpmn:message id="Message_10bz0bl" name="msg_bedarf_gedeckt" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="bedarf_anfrage_prozess">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="172" y="229" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="149" y="272" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0a5ooqu_di" bpmnElement="SequenceFlow_0a5ooqu">
        <di:waypoint x="208" y="247" />
        <di:waypoint x="260" y="247" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1m3wuzk_di" bpmnElement="EndEvent_1m3wuzk">
        <dc:Bounds x="1022" y="229" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1003" y="272" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_11bsoks_di" bpmnElement="SequenceFlow_11bsoks">
        <di:waypoint x="650" y="247" />
        <di:waypoint x="715" y="247" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0br5wnm_di" bpmnElement="SequenceFlow_0br5wnm">
        <di:waypoint x="198" y="540" />
        <di:waypoint x="250" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_0zwid5r_di" bpmnElement="EndEvent_0zwid5r">
        <dc:Bounds x="407" y="522" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1qryaoy_di" bpmnElement="SequenceFlow_1qryaoy">
        <di:waypoint x="350" y="540" />
        <di:waypoint x="407" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="StartEvent_1oj5yza_di" bpmnElement="StartEvent_0xfsbi5">
        <dc:Bounds x="162" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="156" y="565" width="49" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0tbzxr0_di" bpmnElement="Task_1qi5jni">
        <dc:Bounds x="250" y="500" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SubProcess_1y8s1s5_di" bpmnElement="SubProcess_0h1ny74" isExpanded="true">
        <dc:Bounds x="140" y="480" width="325" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_046j4iq_di" bpmnElement="bedarf_anfrage_prozess_match_prozess_starten">
        <dc:Bounds x="550" y="207" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0yz94k1_di" bpmnElement="ExclusiveGateway_0yz94k1" isMarkerVisible="true">
        <dc:Bounds x="425" y="222" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="413" y="186" width="74" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0g86ak6_di" bpmnElement="SequenceFlow_0g86ak6">
        <di:waypoint x="475" y="247" />
        <di:waypoint x="550" y="247" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="507" y="229" width="12" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_03xphmp_di" bpmnElement="SequenceFlow_03xphmp">
        <di:waypoint x="450" y="272" />
        <di:waypoint x="450" y="360" />
        <di:waypoint x="550" y="360" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="454" y="313" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_040pc06_di" bpmnElement="bedarf_anfrage_prozess_stornierung_verarbeiten">
        <dc:Bounds x="550" y="320" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0txu0vj_di" bpmnElement="EndEvent_0txu0vj">
        <dc:Bounds x="1022" y="342" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="999" y="385" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0ifltcr_di" bpmnElement="SequenceFlow_0ifltcr">
        <di:waypoint x="650" y="360" />
        <di:waypoint x="1022" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_1jl56n2_di" bpmnElement="ExclusiveGateway_1jl56n2" isMarkerVisible="true">
        <dc:Bounds x="715" y="222" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="701" y="282" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0h8v8ey_di" bpmnElement="SequenceFlow_0h8v8ey">
        <di:waypoint x="765" y="247" />
        <di:waypoint x="905" y="247" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="825" y="229" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="SubProcess_1xi1dqq_di" bpmnElement="SubProcess_1a2s5hn" isExpanded="true">
        <dc:Bounds x="480" y="480" width="325" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_05hvqdz_di" bpmnElement="SequenceFlow_05hvqdz">
        <di:waypoint x="541" y="540" />
        <di:waypoint x="583" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0uys0nu_di" bpmnElement="Task_1hjbs5v">
        <dc:Bounds x="583" y="500" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_04hst1p_di" bpmnElement="EndEvent_04hst1p">
        <dc:Bounds x="735" y="522" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_05ehmxv_di" bpmnElement="SequenceFlow_05ehmxv">
        <di:waypoint x="683" y="540" />
        <di:waypoint x="735" y="540" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0g09oc8_di" bpmnElement="SequenceFlow_0g09oc8">
        <di:waypoint x="740" y="222" />
        <di:waypoint x="740" y="150" />
        <di:waypoint x="790" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="751" y="183" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_17litnh_di" bpmnElement="AnfrageProzesseSuchenUndBeendenTask">
        <dc:Bounds x="790" y="110" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="StartEvent_0kq2llg_di" bpmnElement="StartEvent_06mv9mn">
        <dc:Bounds x="505" y="522" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="487" y="565" width="74" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_093syas_di" bpmnElement="ExclusiveGateway_093syas" isMarkerVisible="true">
        <dc:Bounds x="905" y="222" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1uov2lb_di" bpmnElement="SequenceFlow_1uov2lb">
        <di:waypoint x="955" y="247" />
        <di:waypoint x="1022" y="247" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_18bm7r2_di" bpmnElement="SequenceFlow_18bm7r2">
        <di:waypoint x="890" y="150" />
        <di:waypoint x="930" y="150" />
        <di:waypoint x="930" y="222" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_06a4jz2_di" bpmnElement="SequenceFlow_06a4jz2">
        <di:waypoint x="360" y="247" />
        <di:waypoint x="425" y="247" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_00h51no_di" bpmnElement="bedarf_anfrage_prozess_beantworten">
        <dc:Bounds x="260" y="207" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
